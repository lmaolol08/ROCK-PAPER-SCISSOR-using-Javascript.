<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <p>Rock Paper Scissors</p>
    <button onclick="
      playGame('rock');
    ">Rock</button>

    <button onclick="
      playGame('paper');
    ">Paper</button>

    <button onclick="
      playGame('scissors');
    ">Scissors</button>

    <button onclick="
        score.wins = 0;
        score.losses = 0;
        score.ties = 0;
        localStorage.removeItem('score');
    ">Reset Score</button>

    <script>
      let score = JSON.parse(localStorage.getItem('score'))
      || {
        wins: 0,
        losses: 0,
        ties: 0,
      };

      /*
      if(score === null){
        score = {
          wins: 0,
          losses: 0,
          ties: 0,
        };
      }     */

      //we first update the score then save it in the local storage but as local storage only acepts strings we convert the 'score' object into string with the help of JSON.stringify then get it out what was in the local storage, when we load the webpage. As the score was converted to a string so to reconvert it back to an object we use JSON.parse. now we should remove the 'loading from storage' part when we press reset button, otherwise the score will start from the same point even after pressing the reset button. So in the reset score button we do- localStorage.removeItem('score'), so that the item is removed. so if we press the reset score button and refresh the page, the 'score' is removed, so it doesn't exist and if we press anything rock or paper or scissor then it gives an error as the memory has been cleared after pressing the reset score button before. So it is null in there and in the bottom when anything we want to do with 'null' it will throw an error. So we check if the score is equal to null, if it is equal o null we make it a default score which is wins=0, losses=0, tie=0. so we are making score equal to the object it was before. Now it runs correctly.

      function playGame(playerMove) {
        const computerMove = pickComputerMove();

        let result = '';

        if (playerMove === 'scissors') {
          if (computerMove === 'rock') {
            result = 'You lose.';
          } else if (computerMove === 'paper') {
            result = 'You win.';
          } else if (computerMove === 'scissors') {
            result = 'Tie.';
          }

        } else if (playerMove === 'paper') {
          if (computerMove === 'rock') {
            result = 'You win.';
          } else if (computerMove === 'paper') {
            result = 'Tie.';
          } else if (computerMove === 'scissors') {
            result = 'You lose.';
          }
          
        } else if (playerMove === 'rock') {
          if (computerMove === 'rock') {
            result = 'Tie.';
          } else if (computerMove === 'paper') {
            result = 'You lose.';
          } else if (computerMove === 'scissors') {
            result = 'You win.';
          }
        }

        if(result === `You win.`){
          score.wins += 1;
        }else if(result === `You lose.`){
          score.losses += 1;
        }else if(result === `Tie.`){
          score.ties += 1;
        }


        localStorage.setItem('score', JSON.stringify(score));  //as local storagr can only store strings we do JSON.strigify to covert the 'score' object into a string.

        alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result}
Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`);
      }

      function pickComputerMove() {
        const randomNumber = Math.random();

        let computerMove = '';

        if (randomNumber >= 0 && randomNumber < 1 / 3) {
          computerMove = 'rock';
        } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
          computerMove = 'paper';
        } else if (randomNumber >= 2 / 3 && randomNumber < 1) {
          computerMove = 'scissors';
        }

        return computerMove;
      }
    </script>
  </body>
</html>